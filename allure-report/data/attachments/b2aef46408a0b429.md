# Test info

- Name: [UI] [Visual] [Add new customer form validation] >> Should display validation error message in 'flat' field with invalid value '10000'
- Location: /home/runner/work/AQA_JS_TS/AQA_JS_TS/Playwright/src/ui/tests/visual/customers/create-customer-form-validation.spec.ts:18:9

# Error details

```
TimeoutError: locator.waitFor: Timeout 15000ms exceeded.
Call log:
  - waiting for locator('div.spinner-border') to be hidden
    35 × locator resolved to visible <div role="status" class="spinner-border text-secondary">…</div>

    at HomePage.waitForElement (/home/runner/work/AQA_JS_TS/AQA_JS_TS/Playwright/src/ui/pages/base.page.ts:25:19)
    at HomePage.waitForSpinnerToHide (/home/runner/work/AQA_JS_TS/AQA_JS_TS/Playwright/src/ui/pages/salesPortal.page.ts:14:16)
    at HomeService.openCustomersPage (/home/runner/work/AQA_JS_TS/AQA_JS_TS/Playwright/src/ui/services/home.service.ts:15:25)
    at /home/runner/work/AQA_JS_TS/AQA_JS_TS/Playwright/src/ui/tests/visual/customers/create-customer-form-validation.spec.ts:13:5
```

# Page snapshot

```yaml
- img
- text: Sales Portal
- separator
- list:
  - listitem:
    - link "Home":
      - /url: "#"
      - img
      - text: Home
  - listitem:
    - link "Orders":
      - /url: "#"
      - img
      - text: Orders
  - listitem:
    - link "Products":
      - /url: "#"
      - img
      - text: Products
  - listitem:
    - link "Customers":
      - /url: "#"
      - img
      - text: Customers
  - listitem:
    - link "Managers":
      - /url: "#"
      - img
      - text: Managers
- switch "Dark mode"
- text: Dark mode
- separator
- link "RELOGIN!":
  - /url: "#"
  - strong: RELOGIN!
- text: 
- heading "Customers List" [level=2]
- button "+ Add Customer"
- searchbox "Search"
- button " Search" [disabled]
- button " Filter"
- status: Loading...
- table:
  - rowgroup:
    - row "Email Name Country Created On Actions":
      - columnheader "Email"
      - columnheader "Name"
      - columnheader "Country"
      - columnheader "Created On"
      - columnheader "Actions"
  - rowgroup:
    - row "No records created yet":
      - cell "No records created yet"
```

# Test source

```ts
   1 | import { Locator, Page } from '@playwright/test';
   2 | import { IResponse } from '../../data/types/api.types';
   3 |
   4 | const DEFAULT_TIMEOUT = 10000;
   5 |
   6 | type LocatorOrSelector = Locator | string;
   7 |
   8 | function isSelector(elementOrSelector: LocatorOrSelector): elementOrSelector is string {
   9 |   return typeof elementOrSelector === 'string';
  10 | }
  11 |
  12 | export class BasePage {
  13 |   constructor(protected page: Page) {}
  14 |
  15 |   protected findElement(locator: LocatorOrSelector) {
  16 |     return isSelector(locator) ? this.page.locator(locator) : locator;
  17 |   }
  18 |
  19 |   protected async waitForElement(
  20 |     locator: LocatorOrSelector,
  21 |     state: 'attached' | 'detached' | 'visible' | 'hidden' = 'visible',
  22 |     timeout = DEFAULT_TIMEOUT
  23 |   ) {
  24 |     const element = this.findElement(locator);
> 25 |     await element.waitFor({ state, timeout });
     |                   ^ TimeoutError: locator.waitFor: Timeout 15000ms exceeded.
  26 |     return element;
  27 |   }
  28 |
  29 |   protected async waitForElementAndScroll(locator: LocatorOrSelector, timeout = DEFAULT_TIMEOUT) {
  30 |     const element = await this.waitForElement(locator, 'visible');
  31 |     await element.scrollIntoViewIfNeeded({ timeout });
  32 |     return element;
  33 |   }
  34 |
  35 |   protected async click(locator: LocatorOrSelector, timeout = DEFAULT_TIMEOUT) {
  36 |     const element = await this.waitForElementAndScroll(locator, timeout);
  37 |     await element.isEnabled();
  38 |     await element.click();
  39 |   }
  40 |
  41 |   protected async setValue(locator: LocatorOrSelector, value: string | number, timeout = DEFAULT_TIMEOUT) {
  42 |     const element = await this.waitForElementAndScroll(locator, timeout);
  43 |     await element.fill(String(value), { timeout });
  44 |   }
  45 |
  46 |   protected async getText(locator: LocatorOrSelector, timeout = DEFAULT_TIMEOUT) {
  47 |     const element = await this.waitForElementAndScroll(locator, timeout);
  48 |     return await element.innerText({ timeout });
  49 |   }
  50 |
  51 |   protected async selectDropdownValue(
  52 |     dropdownLocator: LocatorOrSelector,
  53 |     value: string | number,
  54 |     timeout = DEFAULT_TIMEOUT
  55 |   ) {
  56 |     const element = await this.waitForElementAndScroll(dropdownLocator, timeout);
  57 |     await element.selectOption(String(value), { timeout });
  58 |   }
  59 |
  60 |   async openPage(url: string) {
  61 |     await this.page.goto(url);
  62 |   }
  63 |
  64 |   async interceptResponse<T>(url: string, triggerAction: () => Promise<void>): Promise<IResponse<T>> {
  65 |     const [response] = await Promise.all([this.page.waitForResponse(url), triggerAction()]);
  66 |     return {
  67 |       body: (await response.json()) as T,
  68 |       status: response.status(),
  69 |       headers: response.headers(),
  70 |     };
  71 |   }
  72 | }
  73 |
```